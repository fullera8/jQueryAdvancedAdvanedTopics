<html>
<head>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.0.js"></script>
	<style>div {margin: 3; padding: 5; width: 200px }</style>
</head>
<body>
	<script type="text/javascript">
	
	/* using closures */
	(function($){
		//var currentLevel = 0; //Do not create a single variable or there will only be one state for the page to track (bad for multiple elements using this same plugin).
        
		$.fn.increaseEmphasis = function () {
            if (!this.data('level')) {//this.data binds the tracking state to each element using the plugin
                this.data('level', '0');
            }
            var currentLevel = parseInt(this.data('level')) + 1;//Create variable after data.bind to store state and increase by 1.
            this.data('level', currentLevel);//update thte bound data level to the variable
			//currentLevel++;
			if (currentLevel === 1) {
				return this.css('background-color', 'yellow');
			}
			else if (currentLevel === 2) {
                return this.css('background-color', 'orange');
			}
			else {
                return this.css('background-color', 'red');
            }
        }
	})(jQuery);
	
	/* using data */
	(function($){

	})(jQuery);
	
		
	$(function() {
		$('#increaseButton1').click(function () {
			$("#div1").increaseEmphasis();
		});
        $('#increaseButton2').click(function () {
            $("#div2").increaseEmphasis();
        });
	});
		
	</script>
	
	<h1>Maintaining State</h1>
	
	<h2>These are tracked using a closure</h2>
	<div id="div1">Some content for me to emphasize</div>
	<input type="button" id="increaseButton1" value="Increase Emphasis" />
	
	<div id="div2">Some other content for me to emphasize</div>
	<input type="button" id="increaseButton2" value="Increase Emphasis" />
	
</body>
</html>